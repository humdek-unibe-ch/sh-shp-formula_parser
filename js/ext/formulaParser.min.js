"use strict";var formulaConfigInitCalls={},formulaConfigInit="formulaConfigInit";function initFormulaConfigBuilder(){var o=$(".formulaConfigBuilder")[0];$(o).data(formulaConfigInit)||($(o).data(formulaConfigInit,!0),$(".formulaConfigBuilderMonaco").each((function(){require.config({paths:{vs:BASE_PATH+"/js/ext/vs"}});var o=$(this)[0];require(["vs/editor/editor.main"],(function(){var n={value:$(o).prev().val(),language:"json",automaticLayout:!0,renderLineHighlight:"none"},i=monaco.editor.create(o,n);i.getAction("editor.action.formatDocument").run().then((function(){calcMonacoEditorSize(i,o)})),i.onDidChangeModelContent((function(n){$(o).prev().val(i.getValue()),calcMonacoEditorSize(i,o),$(o).prev().trigger("change")})),showFormulaConfigBuilder(o,i)}))})))}function showFormulaConfigBuilder(o,n){var i,a=getFormulaConfigJson(o),r="";$(".formulaConfigBuilderBtn").each((function(){r=$(this).data("plugin-folder"),$(this).off("click").click((function(){$(".formulaConfig_builder_modal_holder").modal({backdrop:!1}),i&&i.setValue(getFormulaConfigJson(o)),$(".saveFormulaConfigBuilder").each((function(){$(this).attr("data-dismiss","modal"),$(this).click((function(){n.getModel().setValue(JSON.stringify(i.getValue(),null,3))}))}))}))}));var t="/server/plugins/"+r+"/schemas/formulaConfig/formulaConfig.json",e=window.location.protocol+"//"+window.location.host+BASE_PATH+t;$.ajax({dataType:"json",url:e,success:function(o){i=new JSONEditor($(".formulaConfig_builder")[0],{theme:"bootstrap4",iconlib:"fontawesome5",ajax:!0,schema:o,startval:a,show_errors:"always",display_required_only:!0})}})}function getFormulaConfigJson(o){try{return JSON.parse($(o).prev().val())}catch(o){return null}}$(document).ready((function(){initFormulaConfigBuilder()}));